:root {
  --bg: rgba(18, 18, 18, 0.92);
  --panel: rgba(28, 28, 28, 0.95);
  --stroke: rgba(255, 255, 255, 0.12);
  --stroke2: rgba(255, 255, 255, 0.18);
  --text: rgba(255, 255, 255, 0.92);
  --text2: rgba(255, 255, 255, 0.65);
  --shadow: 0 18px 40px rgba(0, 0, 0, 0.45);
  --radius: 18px;
  --railW: 76px;
  --panelW: 300px;
  --pad: 14px;
  --gap: 12px;
  --btn: 58px;
  --critter: 62px;
}

* { box-sizing: border-box; }
html, body {
  margin: 0;
  padding: 0;
  background: transparent;
  font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
}

/* --- LEFT CATEGORY RAIL --- */
#catRail {
  position: fixed;
  left: 14px;
  top: 70px;
  width: var(--railW);
  display: flex;
  flex-direction: column;
  gap: var(--gap);
  z-index: 20;
}

.catBtn {
  width: var(--railW);
  height: var(--railW);
  border-radius: 18px;
  border: 1px solid var(--stroke);
  background: var(--bg);
  box-shadow: var(--shadow);
  display: grid;
  place-items: center;
  cursor: pointer;
}

.catBtn:hover { border-color: var(--stroke2); }

.catIcon {
  font-size: 30px;
  line-height: 1;
}

/* Tooltip (hover label) */
.catBtn[data-tip],
.critterBtn[data-tip] { position: relative; }

.catBtn:hover::after,
.critterBtn:hover::after {
  content: attr(data-tip);
  position: absolute;
  left: calc(100% + 10px);
  top: 50%;
  transform: translateY(-50%);
  background: rgba(0,0,0,0.82);
  color: white;
  padding: 6px 10px;
  border-radius: 10px;
  font-size: 12px;
  white-space: nowrap;
  border: 1px solid rgba(255,255,255,0.12);
}

/* --- SLIDE-OUT PANEL --- */
#panel {
  position: fixed;
  left: calc(14px + var(--railW) + 12px);
  top: 40px;
  width: var(--panelW);
  height: calc(100vh - 80px);
  background: var(--panel);
  border: 1px solid var(--stroke);
  border-radius: var(--radius);
  box-shadow: var(--shadow);
  padding: var(--pad);
  z-index: 15;
  display: flex;
  flex-direction: column;
  overflow: hidden;
  transition: transform 180ms ease, opacity 180ms ease;
}

#panel.closed {
  transform: translateX(-18px);
  opacity: 0;
  pointer-events: none;
}

/* Panel header */
#panelHeader {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 10px;
  padding-bottom: 10px;
  border-bottom: 1px solid var(--stroke);
  margin-bottom: 12px;
}

#panelTitle {
  color: var(--text);
  font-weight: 800;
  letter-spacing: 0.6px;
  font-size: 14px;
  text-transform: uppercase;
}

#panelClose {
  width: 34px;
  height: 34px;
  border-radius: 12px;
  border: 1px solid var(--stroke);
  background: rgba(0,0,0,0.25);
  color: var(--text);
  cursor: pointer;
  display: grid;
  place-items: center;
}

/* --- THE FIX: CLEAN GRID STACKING --- */
#critterGrid {
  flex: 1;
  overflow-y: auto;
  padding-right: 6px; /* room for scrollbar */
  display: grid;
  grid-template-columns: repeat(3, minmax(0, 1fr));
  gap: 14px;
  align-content: start; /* top-pack the grid */
}

/* Make scrollbar subtle */
#critterGrid::-webkit-scrollbar { width: 8px; }
#critterGrid::-webkit-scrollbar-thumb {
  background: rgba(255,255,255,0.12);
  border-radius: 12px;
}

.critterBtn {
  width: 100%;
  aspect-ratio: 1 / 1;            /* perfect square */
  border-radius: 16px;
  border: 1px solid var(--stroke);
  background: rgba(0, 0, 0, 0.25);
  display: grid;
  place-items: center;
  cursor: pointer;
}

.critterBtn:hover { border-color: var(--stroke2); }

.critterBtn .ico {
  font-size: 30px;
  line-height: 1;
}

/* --- CARD POPUP --- */
#card {
  position: fixed;
  left: calc(14px + var(--railW) + 12px + var(--panelW) + 12px);
  top: 40px;
  width: 360px;
  max-width: calc(100vw - 40px);
  background: var(--panel);
  border: 1px solid var(--stroke);
  border-radius: var(--radius);
  box-shadow: var(--shadow);
  padding: 14px;
  z-index: 30;
}

#card.hidden { display: none; }

#cardTop {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 10px;
  padding-bottom: 10px;
  border-bottom: 1px solid var(--stroke);
  margin-bottom: 12px;
}

#cIcon { font-size: 28px; }
#cName { color: var(--text); font-weight: 800; }
#cardClose {
  width: 34px;
  height: 34px;
  border-radius: 12px;
  border: 1px solid var(--stroke);
  background: rgba(0,0,0,0.25);
  color: var(--text);
  cursor: pointer;
  display: grid;
  place-items: center;
}

.cardLabel {
  color: var(--text2);
  font-size: 12px;
  text-transform: uppercase;
  letter-spacing: 0.6px;
  margin-top: 10px;
  margin-bottom: 6px;
}

#cSummary, #cFact {
  color: var(--text);
  font-size: 14px;
  line-height: 1.35;
}

/* Status pill */
#status {
  position: fixed;
  left: 12px;
  bottom: 12px;
  background: rgba(0,0,0,0.75);
  color: rgba(255,255,255,0.75);
  border: 1px solid rgba(255,255,255,0.12);
  border-radius: 999px;
  padding: 6px 10px;
  font-size: 12px;
  z-index: 50;
}
